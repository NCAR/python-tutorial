<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>part1_2 | NCAR Python Tutorials</title>
<link href="../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../assets/css/custom.css" rel="stylesheet" type="text/css">
<link href="../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#AAAAAA">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://ncar.github.io/python-tutorial/part1_2/">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><meta name="author" content="NCAR Xdev Team">
<meta property="og:site_name" content="NCAR Python Tutorials">
<meta property="og:title" content="part1_2">
<meta property="og:url" content="https://ncar.github.io/python-tutorial/part1_2/">
<meta property="og:description" content="Part 1.2 - Creating a Data Dictionary
This is intended to pick off right where part 1.1 left off - you had just commited your new script file that reads in the data from file as a string.
You will now">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-04-08T14:58:42-06:00">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-expand-md static-top mb-4
navbar-dark bg-dark
"><div class="container">
<!-- This keeps the margins nice -->
        <a class="navbar-brand" href="https://ncar.github.io/python-tutorial/">

            <span id="blog-title">NCAR Python Tutorials</span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="bs-navbar">
            <ul class="navbar-nav mr-auto"></ul>
<ul class="navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        
        
        
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header></header><div class="e-content entry-content" itemprop="articleBody text">
    <div class="section" id="part-1-2-creating-a-data-dictionary">
<h2>Part 1.2 - Creating a Data Dictionary</h2>
<p>This is intended to pick off right where part 1.1 left off - you had just commited your new script file that reads in the data from file as a string.</p>
<p>You will now manipulate your data into a more usable format - a dictionary.</p>
<p>In doing so you will learn how to write iterative for loops and about Python data structures.</p>
<ol class="arabic">
<li>
<p>One big string isn't very useful, so use <code class="docutils literal">str.split()</code> to parse the data file into a data structure you can use.</p>
<p>Change the mysci.py script to read:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_873db78f664146a0b71b63efb76a533c-1"> 1</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-2"> 2</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-3"> 3</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-4"> 4</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-5"> 5</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-6"> 6</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-7"> 7</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-8"> 8</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-9"> 9</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-10">10</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-11">11</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-12">12</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-13">13</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-14">14</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-15">15</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-16">16</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-17">17</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-18">18</a>
<a href="#rest_code_873db78f664146a0b71b63efb76a533c-19">19</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_873db78f664146a0b71b63efb76a533c-1"></a><span class="c1"># Initialize my data variable</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-2"></a><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-3"></a>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-4"></a><span class="c1"># Read and parse the data file</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-5"></a><span class="n">filename</span> <span class="o">=</span> <span class="s2">"data/wxobs20170821.txt"</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-6"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">datafile</span><span class="p">:</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-7"></a>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-8"></a> <span class="c1"># Read the first three lines (header)</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-9"></a> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-10"></a>    <span class="n">datafile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-11"></a>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-12"></a> <span class="c1"># Read and parse the rest of the file</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-13"></a> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datafile</span><span class="p">:</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-14"></a>    <span class="n">datum</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-15"></a>    <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-16"></a>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-17"></a><span class="c1"># DEBUG</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-18"></a><span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
<a name="rest_code_873db78f664146a0b71b63efb76a533c-19"></a>   <span class="nb">print</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>
</pre></td>
</tr></table>
<!--  --><p>The first thing that is different in this script is an initialized data variable; <code class="docutils literal">data = []</code> creates the variable data as an empty list which we will populate as we read the file. Python lists are a collection data type that are ordered and changeable - meaning you can call information out of the list by its index and you can add or delete elements to your list. Lists are denoted by square brackets, <code class="docutils literal">[]</code>.</p>
<p>Then with the datafile open for reading capabilities, we are going to write two separate <code class="docutils literal">for</code> loops. A <code class="docutils literal">for</code> loop is used for iterating over a sequence (such as a list). It is important to note the syntax of Python <code class="docutils literal">for</code> loops: the <code class="docutils literal">:</code> at the end of for <code class="docutils literal">for</code> line, the tab-indentation of all lines within the <code class="docutils literal">for</code> loop, and perhaps the absence of an <code class="docutils literal">end for</code> that is found in languages such as Matlab.</p>
<p>In your first <code class="docutils literal">for</code> loop, loop through the dummy variable <code class="docutils literal">_</code> in <code class="docutils literal">range(3)</code>. <code class="docutils literal">range</code> returns a sequence of numbers, starting at 0 and incrementing by 1 (by default), ending at the specified length. Here if you were to <code class="docutils literal">print(_)</code> on each line of the for loop you would see:</p>
<pre class="code python"><a name="rest_code_27327d664f4c4dbba0930cc5ce926a8b-1"></a><span class="mi">0</span>
<a name="rest_code_27327d664f4c4dbba0930cc5ce926a8b-2"></a><span class="mi">1</span>
<a name="rest_code_27327d664f4c4dbba0930cc5ce926a8b-3"></a><span class="mi">2</span>
</pre>
<!--  -->
<p>Try it out if you are unsure of how this works. Here the <code class="docutils literal">_</code> variable is a placeholder, meaning the variable is never called within the loop.</p>
<p>So again, in the first <code class="docutils literal">for</code> loop, you execute the <code class="docutils literal">readline</code> command (which you will remember moves down to the next line each time it is consecutively called) 3 times to read through the file header (which is 3 lines long). <strong>Yay!</strong> You have just written your first <code class="docutils literal">for</code> loop!</p>
<p>Then in a second <code class="docutils literal">for</code> loop, you loop through lines in the remainder of your datafile. On each line, split it along white space. The <code class="docutils literal">string.split()</code> method splits a string into a list on a specified separator, the default being white space. You could use any character you like, but other useful options are <code class="docutils literal">/t</code> for splitting along tabs or <code class="docutils literal">,</code> along commmas.</p>
<p>Then you <code class="docutils literal">append</code> this split line list to the end of your data <code class="docutils literal">list</code>. The <code class="docutils literal">list.append()</code> method adds a single item to the end of your <code class="docutils literal">list</code>. After every line in your <code class="docutils literal">for</code> loop iteration, the data <code class="docutils literal">list</code> that was empty is one element longer. Now we have a <code class="docutils literal">list</code> of <code class="docutils literal"><span class="pre">list``s</span> for our data variable - a ``list</code> of the data in each line for multiple lines.</p>
<p>When you print each datum in data, you'll see that each datum is a <code class="docutils literal">list</code> of <code class="docutils literal">string</code> values.</p>
<p>We just covered a lot of Python nuances in a very little bit a code!</p>
<p><a class="reference external" href="https://book.pythontips.com/en/latest/for_-_else.html">More information on for-loops</a>
<a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">More information on Python lists</a></p>
</li>
<li>
<p>Now, to practice list indexing, get the first, 10th, and last row in data.</p>
<p>Change the DEBUG section of our mysci.py script to:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_6a4ca32e160b4576a099782b0ece5ac2-17">17</a>
<a href="#rest_code_6a4ca32e160b4576a099782b0ece5ac2-18">18</a>
<a href="#rest_code_6a4ca32e160b4576a099782b0ece5ac2-19">19</a>
<a href="#rest_code_6a4ca32e160b4576a099782b0ece5ac2-20">20</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_6a4ca32e160b4576a099782b0ece5ac2-17"></a><span class="c1"># DEBUG</span>
<a name="rest_code_6a4ca32e160b4576a099782b0ece5ac2-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a name="rest_code_6a4ca32e160b4576a099782b0ece5ac2-19"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
<a name="rest_code_6a4ca32e160b4576a099782b0ece5ac2-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></td>
</tr></table>
<!--  --><p>Index your list by adding the number of your index in square brackets, <code class="docutils literal">[]</code>, after the name of the <code class="docutils literal">list</code>. Python is 0-indexed so <code class="docutils literal">data[0]</code> refers to the first index and <code class="docutils literal"><span class="pre">[-1]</span></code> refers to the last index.</p>
</li>
<li>
<p>Now, to practice slice indexing, get the first 10 rows in data.</p>
<p>Change the DEBUG section of our mysci.py script to:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_a4ceb5892af543a0899d0606d8348e07-17">17</a>
<a href="#rest_code_a4ceb5892af543a0899d0606d8348e07-18">18</a>
<a href="#rest_code_a4ceb5892af543a0899d0606d8348e07-19">19</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_a4ceb5892af543a0899d0606d8348e07-17"></a><span class="c1"># DEBUG</span>
<a name="rest_code_a4ceb5892af543a0899d0606d8348e07-18"></a><span class="k">for</span> <span class="n">datum</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]:</span>
<a name="rest_code_a4ceb5892af543a0899d0606d8348e07-19"></a>   <span class="nb">print</span><span class="p">(</span><span class="n">datum</span><span class="p">)</span>
</pre></td>
</tr></table>
<!--  --><p>Using a colon, <code class="docutils literal">:</code>, between two index integers <code class="docutils literal">a</code> and <code class="docutils literal">b</code>, you get all indexes between a and b. See what happens when you print <code class="docutils literal"><span class="pre">data[:10]</span></code>, <code class="docutils literal">data[0:10:2]</code>, and <code class="docutils literal">data[slice(0,10,2)]</code>. What's the difference?</p>
</li>
<li>
<p>Now, to practice nested indexing,get the 5th, first 5, and every other column of rows 8 in data.</p>
<p>Change the DEBUG section of the mysci.py script to:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_e069733f95d2482e8cc542bfa2082e5b-17">17</a>
<a href="#rest_code_e069733f95d2482e8cc542bfa2082e5b-18">18</a>
<a href="#rest_code_e069733f95d2482e8cc542bfa2082e5b-19">19</a>
<a href="#rest_code_e069733f95d2482e8cc542bfa2082e5b-20">20</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_e069733f95d2482e8cc542bfa2082e5b-17"></a><span class="c1"># DEBUG</span>
<a name="rest_code_e069733f95d2482e8cc542bfa2082e5b-18"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
<a name="rest_code_e069733f95d2482e8cc542bfa2082e5b-19"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">][:</span><span class="mi">5</span><span class="p">])</span>
<a name="rest_code_e069733f95d2482e8cc542bfa2082e5b-20"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">][::</span><span class="mi">2</span><span class="p">])</span>
</pre></td>
</tr></table>
<!--  --><p>In nested <code class="docutils literal">list</code> indexing, the first index determines the row, and the second determines the element from that row. Also try printing <code class="docutils literal"><span class="pre">data[5:8][4]</span></code>, why doesn't this work?</p>
</li>
<li>
<p>Clean up the file (remove DEBUG section), stage the changes, and commit.</p>
<!-- code-block: bash

$ git add mysci.py
$ git commit -m "Parsing file" -->
<!--  -->
</li>
<li>
<p>Can you remember which column is which? Is time the first column or the second? Which column is the temperature?</p>
<p>Each column is a time-series of data. We would ideally like each time-series easily accessible, which is not the case when data is row-column ordered (like it currently is). (Remember what happens when you try to do something like <code class="docutils literal"><span class="pre">data[:][4]</span></code>!)</p>
<p>Let's get our data into a more convenient named-column format.</p>
<p>Change mysci.py to the following:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-1"> 1</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-2"> 2</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-3"> 3</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-4"> 4</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-5"> 5</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-6"> 6</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-7"> 7</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-8"> 8</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-9"> 9</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-10">10</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-11">11</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-12">12</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-13">13</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-14">14</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-15">15</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-16">16</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-17">17</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-18">18</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-19">19</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-20">20</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-21">21</a>
<a href="#rest_code_8cb51c2dfcd6476fa009d8903efbb619-22">22</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-1"></a><span class="c1"># Initialize my data variable</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-2"></a><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'date'</span><span class="p">:</span> <span class="p">[],</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-3"></a>  <span class="s1">'time'</span><span class="p">:</span> <span class="p">[],</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-4"></a>  <span class="s1">'tempout'</span><span class="p">:</span> <span class="p">[]}</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-5"></a>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-6"></a><span class="c1"># Read and parse the data file</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-7"></a><span class="n">filename</span> <span class="o">=</span> <span class="s2">"data/wxobs20170821.txt"</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-8"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">datafile</span><span class="p">:</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-9"></a>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-10"></a>   <span class="c1"># Read the first three lines (header)</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-11"></a>   <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-12"></a>      <span class="n">datafile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-13"></a>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-14"></a>   <span class="c1"># Read and parse the rest of the file</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-15"></a>   <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datafile</span><span class="p">:</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-16"></a>      <span class="n">split_line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-17"></a>      <span class="n">data</span><span class="p">[</span><span class="s1">'date'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_line</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-18"></a>      <span class="n">data</span><span class="p">[</span><span class="s1">'time'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_line</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-19"></a>      <span class="n">data</span><span class="p">[</span><span class="s1">'tempout'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_line</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-20"></a>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-21"></a><span class="c1"># DEBUG</span>
<a name="rest_code_8cb51c2dfcd6476fa009d8903efbb619-22"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">'time'</span><span class="p">])</span>
</pre></td>
</tr></table>
<!--  --><p>First we'll initialize a dictionary, <code class="docutils literal">dict</code>, indicated by the curly brackets, <code class="docutils literal">{}</code>. Dictionaries, like <code class="docutils literal"><span class="pre">list``s,</span> are changeable, but they are unordered. They have keys, rather than positions, to point to their elements. Here you have created 3 elements of your dictionary, all currently empty <span class="pre">``list``s,</span> and specified by the keys ``date</code>, <code class="docutils literal">time</code>, and <code class="docutils literal">tempout</code>. Keys act similarly to indexes: to pull out the <code class="docutils literal">tempout</code> element from data you would type <code class="docutils literal"><span class="pre">data['tempout']</span></code>.</p>
<p>Grab date (the first column of each line), time (the second column of each line), and temperature data (the third column), from each line and <code class="docutils literal">append</code> it to the <code class="docutils literal">list</code> associated with each of these data variables.</p>
<p><a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">More on Python dictionaries</a></p>
</li>
<li>
<p>Clean up (remove DEBUG section), stage, and commit</p>
<!-- code-block: bash

$ git add mysci.py
$ git commit -m "Parsing select time-series" -->
<!--  -->
</li>
<li>
<p>Now it's easy to get the time-series informationfor each column that we are interested in grabbing, and we can get each column by name. However, everything read fromthe text file is a str. What if we want to do math on this data, then we need it to be a different data type!</p>
<p>So, let's convert the tempout time-series to be a <code class="docutils literal">float</code> by changing the line:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_72cfcb589e7b49e5b4445caf2653ad19-19">19</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_72cfcb589e7b49e5b4445caf2653ad19-19"></a><span class="n">data</span><span class="p">[</span><span class="s1">'tempout'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">split_line</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></td>
</tr></table>
<!--  --><p>to:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_bf2055382413445db5c5d010008e2cda-19">19</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_bf2055382413445db5c5d010008e2cda-19"></a><span class="n">data</span><span class="p">[</span><span class="s1">'tempout'</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">split_line</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
</pre></td>
</tr></table>
<!--  --><p>The <code class="docutils literal">float</code> datatype refers to floating point real values - the datatype of any numbers with values after a decimal point. You could also change the datatype to <code class="docutils literal">int</code>, which will round the values down to the closest full integer.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex">More on Python numeric types (int, float, complex)</a></p>
</li>
<li>
<p>Add a DEBUG section at the end and see what <code class="docutils literal"><span class="pre">data['tempout']</span></code> now looks like.</p>
<p>Do you see a difference? It should now be a list of floats.</p>
</li>
<li><p>Clean up (remove DEBUG section), stage, and commit</p></li>
</ol>
<blockquote>
<!-- code-block: bash

$ git add mysci.py
$ git commit -m "Converting tempout to floats" -->
<!--  -->
</blockquote>
<ol class="arabic" start="11">
<li>
<p>This seems great, so far! But what if you want to read more columns to our data later? You would have to change the initialization of the data variable (at the top of <code class="docutils literal">mysci.py</code>) and have to add the appropriate line in the "read and parse" section. Essentially, that means you need to maintain 2 parts of the code and make sure that both remain consistent with each other.</p>
<p>This is generally not good practice. Ideally, you want to be able to change only one part of the code and know that the rest of the code will remain consistent. So, let's fix this.</p>
<p>Change mysci.py to:</p>
<table class="codetable"><tr>
<td class="linenos"><div class="linenodiv"><pre><a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-1"> 1</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-2"> 2</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-3"> 3</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-4"> 4</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-5"> 5</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-6"> 6</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-7"> 7</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-8"> 8</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-9"> 9</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-10">10</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-11">11</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-12">12</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-13">13</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-14">14</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-15">15</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-16">16</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-17">17</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-18">18</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-19">19</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-20">20</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-21">21</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-22">22</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-23">23</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-24">24</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-25">25</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-26">26</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-27">27</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-28">28</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-29">29</a>
<a href="#rest_code_84be7d4284e14c11a25c30badcdeb943-30">30</a></pre></div></td>
<td class="code"><pre class="code python"><a name="rest_code_84be7d4284e14c11a25c30badcdeb943-1"></a><span class="c1"># Column names and column indices to read</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-2"></a><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'date'</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">'time'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">'tempout'</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-3"></a>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-4"></a><span class="c1"># Data types for each column (only if non-string)</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-5"></a><span class="n">types</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'tempout'</span><span class="p">:</span> <span class="nb">float</span><span class="p">}</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-6"></a>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-7"></a><span class="c1"># Initialize my data variable</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-8"></a><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-9"></a><span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-10"></a>   <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-11"></a>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-12"></a><span class="c1"># Read and parse the data file</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-13"></a><span class="n">filename</span> <span class="o">=</span> <span class="s2">"data/wxobs20170821.txt"</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-14"></a><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">datafile</span><span class="p">:</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-15"></a>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-16"></a>   <span class="c1"># Read the first three lines (header)</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-17"></a>   <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-18"></a>      <span class="n">datafile</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-19"></a>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-20"></a>   <span class="c1"># Read and parse the rest of the file</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-21"></a>   <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">datafile</span><span class="p">:</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-22"></a>      <span class="n">split_line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-23"></a>      <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-24"></a>         <span class="n">i</span> <span class="o">=</span> <span class="n">columns</span><span class="p">[</span><span class="n">column</span><span class="p">]</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-25"></a>         <span class="n">t</span> <span class="o">=</span> <span class="n">types</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-26"></a>         <span class="n">value</span> <span class="o">=</span> <span class="n">t</span><span class="p">(</span><span class="n">split_line</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-27"></a>         <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-28"></a>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-29"></a><span class="c1"># DEBUG</span>
<a name="rest_code_84be7d4284e14c11a25c30badcdeb943-30"></a><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">'tempout'</span><span class="p">])</span>
</pre></td>
</tr></table>
<!--  --><p>You have now created a columns <code class="docutils literal">dict</code> that points each data variable to its column-index. And a types <code class="docutils literal">dict</code>, that indicates what type to convert the data when necessary. When you want new variables pulled out of the datafile, change these two variables.</p>
<p>Initializing the data <code class="docutils literal">dict</code> now includes a <code class="docutils literal">for</code> loop, where for each variable specified in columns that key is initialized pointing to an empty <code class="docutils literal">list</code>. This is the first time you have looped over a <code class="docutils literal">dict</code> and added key-value pairs to a <code class="docutils literal">dict</code> via assignment.</p>
<p>When reading and parsing the file, you created your first nested <code class="docutils literal">for</code> loop. For every line of the datafile, split that line - and then for every desired variable in the columns <code class="docutils literal">dict</code> (date, time, tempout): grab the datum from the current split line with the specified index (0, 1, 2), use the <code class="docutils literal">dict.get()</code> method to find the desired datatype if specired (avoiding <code class="docutils literal"><span class="pre">key-not-found</span></code> errors and defaulting to <code class="docutils literal">str</code> if unspecified), convert the datum to the desired datatype, and <code class="docutils literal">append</code> the datum to the <code class="docutils literal">list</code> associated with each column key within the data <code class="docutils literal">dict</code>.</p>
</li>
<li><p>Clean up (remove DEBUG section), stage, and commit</p></li>
</ol>
<blockquote>
<!-- code-block: bash

$ git add mysci.py
$ git commit -m "Refactoring data parsing code" -->
<!--  -->
</blockquote>
<hr class="docutils">
<p>That concludes the second lesson of this virtual tutorial.</p>
<p>In this section you saved the variables of date, time, and tempout in a data dictionary.</p>
<p>You should now be familiar with the data structures <code class="docutils literal"><span class="pre">list``s</span> (as well as list indexing, nested lists, and the command ``list.append()</code>), <code class="docutils literal"><span class="pre">dict``s</span> (their keys and the command ``dict.get()</code>), and <code class="docutils literal"><span class="pre">range``s.</span> You also learned to write ``for</code> loops, about the <code class="docutils literal">float</code> datatype, and using the Python commands <code class="docutils literal">str.split()</code>.</p>
<hr class="docutils">
<p>Suggested resources:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://book.pythontips.com/en/latest/for_-_else.html">For-loops</a></p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/tutorial/datastructures.html#more-on-lists">Lists</a></p></li>
</ul>
<hr class="docutils">
<p>Please continue to <a class="reference external" href="../part1_3/">Part 1.3</a>.</p>
<p><a class="reference external" href="../">Return to Outline</a></p>
</div>
    </div>
    

</article><!--End of body content--><footer id="footer">
            Contents Â© 2020         <a href="mailto:xdev@ucar.edu">NCAR Xdev Team</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
            
        </footer>
</div>
</div>


            <script src="../assets/js/jquery.min.js"></script><script src="../assets/js/popper.min.js"></script><script src="../assets/js/bootstrap.min.js"></script><script src="../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script>
</body>
</html>
